name = "blue-management-worker"
main = "src/index.ts"
compatibility_date = "2024-04-03"

workers_dev = true 
preview_urls = true

# Configure these with `wrangler secret put` (or `.dev.vars` for local development):
# JWT_SECRET
# AGENT_SECRET
# SESSION_TOKEN_SECRET
# USAGE_REPORT_SECRET
# CF_ACCESS_TEAM_DOMAIN
# CF_ACCESS_AUD
#
# Optional:
# ADMIN_ALLOW_EMAILS (comma-separated list)
# CORS_ALLOW_ORIGINS (comma-separated list)

[[d1_databases]]
binding = "DB"
database_name = "blue-proxy-management-db"
database_id = "4a92c4fd-d9a6-4933-b05a-fde0de2ef730"

# Cron triggers for failover monitoring
# [triggers]
# crons = [ "*/5 * * * *" ] # Run every 5 minutes

[[routes]]
pattern = "api.blue2000.cc"
custom_domain = true
zone_name = "blue2000.cc"

[vars]
CORS_ALLOW_ORIGINS="https://admin.blue2000.cc,https://blue2000.cc,https://www.blue2000.cc,http://127.0.0.1:5173"